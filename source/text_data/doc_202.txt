182
Chapter 9
Search Engine Evaluation
If the user looks at more documents, the cumulative gain is more. This is at the
cost of spending more time to examine the list. Thus, cumulative gain gives us some
idea about how much total gain the user would have if the user examines all these
documents.
There is one deficiency which is not considering the rank or position of each
document. Looking at the CG sum of the top four documents, we know there is
only one highly relevant document, one marginally relevant document, two non-
relevant documents; we don’t know where they are ranked in the list. Ideally, we
want those with gains of three to be ranked on the top. But how can we capture that
intuition? The second three is not as good as the first three at the top. That means
the contribution of gain from different documents has to be weighted by their
position. The document at position one doesn’t need to be discounted because
you can assume that the user always sees this document, but the second one will
be discounted a little bit because there’s a small possibility that the user wouldn’t
notice it. We divide this gain by a weight based on the position in order to capture
this position-based penalty. The discounted cumulative gain does exactly this:
DCG(L) = r1 +
n
�
i=2
ri
log2 i .
(9.6)
Each document’s gain is discounted by dividing by a logarithm of its position in the
list. Thus, a lowly ranked document would not contribute as much gain as a highly
ranked document. That means if, for example, you switch the position of D5 and
D2, then the overall DCG score would increase since D5’s relevance score of three
is discounted less by being close to the top.
At this point, we have a discounted cumulative gain for measuring the utility of
a ranked list with multiple levels of judgment. We still need to do a little bit more
in order to make this measure comparable across different queries. The idea here
is normalized discounted cumulative gain (NDCG):
NDCG(L) = DCG(L)
IDCG .
(9.7)
It is simply DCG normalized by the ideal DCG (IDCG) for a particular query. The
IDCG is the DCG of an ideal ranked list with the most relevant documents at the
top, sorted in decreasing order of relevance. For example, imagine that we have nine
documents in the whole collection rated three. Then, our ideal ranked list would
have put all these nine documents on the very top. All this would be followed by
a two, because that’s the best we could do after we have run out of threes. Then,
we can compute the DCG for this ideal ranked list. This becomes the denominator
