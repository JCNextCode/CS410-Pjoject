9.3 Evaluation of a Ranked List
179
Recall our discussion about the F1 score. In this situation, is an arithmetic mean
of average precisions acceptable? We concluded before that the arithmetic mean
of precision and recall was not as good as the harmonic mean. Here, we have a
similar situation: we should think about the alternative ways of aggregating the
average precisions. Another way is the geometric mean; using the geometric mean
to consolidate the average precisions is called geometric mean average precision,
or gMAP for short. We define it below mathematically as
gMAP(L) =
� m
�
i=1
avp(Li)
� 1
m
,
(9.3)
or in log space as
gMAP(L) = exp
�
1
m
m
�
i=1
ln avp(Li)
�
.
(9.4)
Imagine you are again testing a new algorithm. You’ve tested multiple topics
(queries) and have the average precision for each topic. You wish to consider the
overall performance, but which strategy would you use? Can you think of scenarios
whereusingoneofthemwouldmakeadifference?Thatis, isthereasituationwhere
one measure would give different rankings of the two methods? Similar to our
argument about F1, we realize in the arithmetic mean the sum is dominated by large
values. Here, a large value means that the query is relatively easy. On the other hand,
gMAP tends to be affected more by low values—those are the queries that don’t have
good performance (the average precision is low). If you wish to improve the search
engine for those difficult queries, then gMAP would be preferred. If you just want to
improve over all kinds of queries, then perhaps MAP would be preferred. So again,
the answer depends on your users’ tasks and preferences. Which measure is most
likely going to represent your users’ needs?
As a special case of the mean average precision, we can also think about the case
wherethereispreciselyonerelevantdocumentintheentirecollection.Thisactually
happens quite often, for example, in what’s called a known item search, where you
know a target page such as Amazon or Facebook. Or in another application such
as question answering, there is only one answer. In this scenario, if you rank the
answers, then your goal is to rank that one particular answer on top. In this case,
the average precision will boil down to the reciprocal rank. That is, 1
r where r is
the position (rank) of the single relevant document. If that document is ranked on
the very top, then the reciprocal rank would be 1
1 = 1. If it’s ranked at the second
